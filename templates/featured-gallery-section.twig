{#
/**
 * Block Name: Featured Gallery
 *
 * This is the template that displays the Featured Gallery block.
 */
#}

{# extend & imports 

#}

{% extends "block.twig" %}
{% import "block-functions.twig" as block_functions %}

{# block fields 

#}

{% set flex_first_class = (fields.fgallery_layout == 'right') ? 'uk-flex-first' %}

{# text fields #}
{% set btn_txt = fields.fgallery_btn_txt|default('View Gallery') %}

{# img fields #}
{% if fields.fgallery_img %}
  {% set the_image = Image(fields.fgallery_img).src %}
  {% set the_image_alt = Image(fields.fgallery_img).alt %}
{% endif %}
{% set img_src = the_image|resize(720, 500)|default('https://picsum.photos/id/' ~ default_theme_img_id ~ '/720/500') %}
{% set img_alt = the_image_alt %}

{# main block 

#}

{% block block_main %}
  <div class="featured-item-section uk-section uk-section-small uk-section-muted">
    <div class="uk-container">
      
      {# featured gallery #}
      <div class="uk-grid-match uk-flex uk-flex-{{ align_content|e('esc_html') }} uk-grid-collapse uk-background-default uk-text-{{ block.align_text|e('esc_html') }} uk-box-shadow-medium" uk-grid>
        
        {# featured gallery : imgae (left) #}
        <div class="uk-width-3-5@m">
          {{ block_functions.block_img(is_preview, img_src, img_alt, {w: '720', h: '500'}) }}
        </div>
        
        {# featured gallery : content (right) #}
        <div class="uk-padding-large uk-width-2-5@m {{ flex_first_class }}">
          
          {# block heading #}
          {% if fields.fgallery_heading %}
            <h3>{{ fields.fgallery_heading|e('esc_html') }}</h3>
          {% endif %}
          
          {# block message #}
          {% if fields.fgallery_msg %}
            <p class="uk-margin-small">{{ fields.fgallery_msg|e('esc_html') }}</p>
          {% endif %}
          
          {# gallery launch button #}
          {% if fields.fgallery %}
            <div class="uk-margin-top">
              <a id="launchGallery" class="feature-link uk-text-uppercase uk-text-emphasis" uk-tooltip="Click to launch gallery">{{ btn_txt|e('esc_html') }}</a>
            </div>
          {% endif %}
          
        </div>
        
      </div>
      
    </div>
  </div>
{% endblock %}

{# block scripts 

#}

{% block block_scripts %}
  {% if fields.fgallery and not is_preview %}
    {{ block_functions.block_lg(is_preview, 'launchGallery', fields.fgallery) }}
  {% endif %}
{% endblock %}