{#
/**
 * Block Name: Cover section
 *
 * This is the template that displays the Cover section block.
 */
#}

{% extends "block.twig" %}
{% import "block-functions.twig" as block_functions %}

{% block block_content %}

  {# rmcc-block vars (inside block_content) 

  #}
  
  {% set container_size = (align_text == 'center') ? 'small' : 'xlarge'  %}
  {% set img_src = _block_img.src|resize(1920, 800)|default('https://picsum.photos/id/' ~ default_theme_img_id ~ '/1920/800') %}
  {% set img_alt = _block_img.alt %}
  
  {# rmcc-block markup 

  #}
  
  <div class="uk-inline headercover">
    
    {# block img #}
    {{ block_functions.block_img(is_preview, img_src, img_alt, {class: fullheight_img_class, coverheight: fullheight}) }}
    
    {# block content #}
    {% if heading or message or (button_text and button_url) or bottom_msg %}
      <div class="uk-position-cover uk-overlay uk-overlay-primary overlay-contained">
        <div class="uk-position-cover uk-container uk-container-{{ container_size|e('esc_html') }} uk-flex uk-flex-{{ align_content|e('esc_html') }} uk-flex-{{ align_text|e('esc_html') }} uk-text-{{ align_text|e('esc_html') }}">
          <div class="cover-content">
            
            {# block heading #}
            {% if heading %}
              <h1 class="uk-heading-small uk-margin-large-top">
                {{ heading|e('wp_kses_post') }}
              </h1>
            {% endif %}
            
            {# divider #}
            {% if heading and message %}
              <hr class="uk-divider-small">
            {% endif %}
            
            {# block message #}
            {% if message %}
              <p class="uk-text-emphasis uk-text-lead uk-margin-top uk-margin-medium-bottom">
                {{ message|e('wp_kses_post') }}
              </p>
            {% endif %}
            
            {# block btn (text & url) #}
            {% if button_text and button_url %}
              {{ block_functions.block_link(is_preview, button_url, button_text, {class: 'uk-button uk-button-default uk-button-large scroll'}) }}
            {% endif %}
            
          </div>
        </div>
        
        {# block bottom message #}
        {% if bottom_msg %}
          <div class="uk-position-cover uk-container uk-container-{{ container_size|e('esc_html') }}">
            <div class="uk-position-bottom uk-position-small uk-text-{{ align_text|e('esc_html') }} uk-padding-small uk-padding-remove-vertical">
              {{ bottom_msg|e('wp_kses_post') }}
            </div>
          </div>
        {% endif %}
        
      </div>
    {% endif %}
    
  </div>
  
{% endblock %}